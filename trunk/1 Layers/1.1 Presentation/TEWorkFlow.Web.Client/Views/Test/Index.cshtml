@{
    Layout = null;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>系统界面 OutlookTree</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="~/Styles/demo.css" />
    <script src="~/scripts/boot.js" type="text/javascript"></script>
</head>
<body>
    <!--Layout-->
    <div id="layout1" class="mini-layout fill">
        <div class="header" region="north" height="70" showsplit="false" showheader="false">
            <h1 style="margin: 0; padding: 15px; cursor: default; font-family: 微软雅黑,黑体,宋体;">
                T & E workflow
            </h1>
            <div style="position: absolute; top: 18px; right: 10px;">
                <a class="mini-button mini-button-iconTop" iconcls="icon-add" onclick="onQuickClick" plain="true">快捷</a> 
                <a class="mini-button mini-button-iconTop" iconcls="icon-edit"onclick="onClick" plain="true">首页</a> 
                <a class="mini-button mini-button-iconTop" iconcls="icon-date" onclick="onClick" plain="true">消息</a> 
                <a class="mini-button mini-button-iconTop" iconcls="icon-edit" onclick="onClick" plain="true">设置</a> 
                <a class="mini-button mini-button-iconTop" iconcls="icon-close" onclick="onClick" plain="true">关闭</a>
            </div>
        </div>
        <div title="south" region="south" showsplit="false" showheader="false" height="30">
            <div style="line-height: 28px; text-align: center; cursor: default">
                Copyright</div>
        </div>
        <div title="center" region="center" style="border: 0;" bodystyle="overflow:hidden;">
            <!--Splitter-->
            <div class="mini-splitter fill" borderstyle="border:0;">
                <div size="180" maxsize="250" minsize="100" showcollapsebutton="true" style="border: 0;">
                    <!--OutlookTree-->
                    <div id="leftTree" class="mini-outlooktree" url="/Account/GetModules/" onnodeclick="onNodeSelect" textfield="text" idfield="id" parentfield="pid" expandOnLoad="true">
                    </div>
                </div>
                <div showcollapsebutton="false" style="noborder">
                    <!--Tabs-->
                    <div id="mainTabs" class="mini-tabs " activeindex="0" style="width: 100%; height: 100%;" plain="false">
                        <div title="首页" url="about:blank">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        mini.parse();
        var tree = mini.get("leftTree");

        function showTab(node) {
            var tabs = mini.get("mainTabs");
            var id = "tab$" + node.id;
            var tab = tabs.getTab(id);
            //tabs.removeTab(tab);
            if (!tab) {
                tab = {};
                tab.name = id;
                tab.title = node.text;
                tab.iconCls = node.iconCls;
                tab.showCloseButton = true;

                //这里拼接了url，实际项目，应该从后台直接获得完整的url地址
                if (node.url) {
                    tab.url = node.url;
                }
                else {
                    tab.url = mini_JSPath + "../../docs/api/" + node.id + ".html";
                }
                tabs.addTab(tab);
            }
            tabs.activeTab(tab);
        }

        function onNodeSelect(e) {
            var node = e.node;
            var isLeaf = e.isLeaf;

            if (isLeaf) {
                showTab(node);
            }
        }

        function onClick(e) {
            var text = this.getText();
            alert(text);
        }
        function onQuickClick(e) {
            tree.expandPath("datagrid");
            tree.selectNode("datagrid");
        }
    </script>
</body>
</html>
